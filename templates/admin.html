<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>관리자 페이지</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- Font Awesome 추가 -->
    <style>
        body, input, button, select {
            font-size: 20px;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            color: #333;
            display: flex;
            transition: margin-right 0.5s;
        }
        h1 {
            color: #0056b3;
        }
        form {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }
        select, input[type="text"], input[type="password"] {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            margin-bottom: 20px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        button:hover {
            background-color: #45a049;
        }
        button:active {
            background-color: #3e8c43;
            transform: scale(0.98);
        }
        .sidebar {
            height: 100vh;
            width: 50px; /* 초기 너비 설정 */
            position: fixed;
            z-index: 1;
            top: 0;
            left: 0;
            background-color: #111;
            overflow-x: hidden;
            transition: width 0.5s;
            padding-top: 20px;
        }
        .sidebar a {
            padding: 10px 15px;
            text-decoration: none;
            font-size: 25px;
            color: white;
            display: block;
            transition: 0.3s;
        }
        .sidebar a:hover {
            color: #f1f1f1;
        }
        .sidebar .closebtn {
            position: absolute;
            top: 0;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
        }
        .link-text {
            display: inline; /* 기본적으로 텍스트 표시 */
        }

        .sidebar.collapsed .link-text {
            display: none; /* 축소된 상태에서는 텍스트 숨김 */
        }

        .sidebar:not(.collapsed) .link-text {
            display: inline; /* 확장된 상태에서 텍스트 표시 */
        }

        .sidebar.collapsed {
            width: 50px; /* 축소된 상태의 사이드바 너비 */
        }

        .sidebar:not(.collapsed) {
            width: 250px; /* 확장된 상태의 사이드바 너비 */
        }
        .sidebar.collapsed + #main {
            margin-left: 50px; /* 사이드바가 축소되었을 때의 marginLeft */
        }

        .sidebar:not(.collapsed) + #main {
            margin-left: 250px; /* 사이드바가 확장되었을 때의 marginLeft */
        }
        #main {
            transition: margin-right 0.5s, margin-left 0.5s ease;
            padding: 16px;
            flex-grow: 1;
            margin-right: 50px; /* 초기 marginRight 설정 */
        }
        .openbtn {
            font-size: 20px;
            cursor: pointer;
            background-color: #111;
            color: white;
            border: none;
            position: fixed;
            top: 10px;
            left: 10px;
            width: 50px; /* 너비 조정 */
            height: 50px; /* 높이 조정 */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .sidebar.collapsed .openbtn {
            left: calc(50px - 50px / 2); /* 축소된 사이드바 중앙에 위치 */
        }
        .openbtn:hover {
            background-color: #444;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
        <a href="/login"><i class="fa fa-home"></i><span class="link-text"> 로그인</span></a>
        <a href="#"><i class="fa fa-check-square-o"></i><span class="link-text"> 체크시트</span></a>
        <a href="/checksheet-history"><i class="fa fa-history"></i><span class="link-text"> 이력관리</span></a>
        <a href="/admin"><i class="fa fa-user"></i><span class="link-text"> 관리자 메뉴</span></a>
    </div>
    <button class="openbtn" onclick="toggleNav()">☰</button> <!-- 기존의 햄버거 메뉴 아이콘을 사용 -->
    <div id="main">
        <h1>관리자 페이지</h1>
        <form id="login-form">
            <label for="password">관리자 비밀번호:</label>
            <input type="password" id="password" name="password" required>
            <button type="button" onclick="login()">로그인</button>
        </form>
        <form id="admin-form" class="hidden">
            <label for="uploadFolder">UPLOAD_FOLDER:</label>
            <input type="text" id="uploadFolder" name="uploadFolder" value="\\10.36.15.119\CheckSheet">
            <label for="ora7User">ORA7_USER:</label>
            <input type="text" id="ora7User" name="ora7User" value="MOPN">
            <label for="ora7Password">ORA7_PASSWORD:</label>
            <input type="text" id="ora7Password" name="ora7Password" value="MOPN">
            <label for="ora7Host">ORA7_HOST:</label>
            <input type="text" id="ora7Host" name="ora7Host" value="10.36.15.45">
            <label for="ora7Port">ORA7_PORT:</label>
            <input type="text" id="ora7Port" name="ora7Port" value="1521">
            <label for="ora7ServiceName">ORA7_SERVICE_NAME:</label>
            <input type="text" id="ora7ServiceName" name="ora7ServiceName" value="ORA7">
            <label for="neuronUser">NEURON_USER:</label>
            <input type="text" id="neuronUser" name="neuronUser" value="ymfk_user">
            <label for="neuronPassword">NEURON_PASSWORD:</label>
            <input type="text" id="neuronPassword" name="neuronPassword" value="ymfk_user">
            <label for="neuronHost">NEURON_HOST:</label>
            <input type="text" id="neuronHost" name="neuronHost" value="10.36.15.42">
            <label for="neuronPort">NEURON_PORT:</label>
            <input type="text" id="neuronPort" name="neuronPort" value="1521">
            <label for="neuronServiceName">NEURON_SERVICE_NAME:</label>
            <input type="text" id="neuronServiceName" name="neuronServiceName" value="neuron">
            <button type="button" onclick="saveChanges()">저장</button>
        </form>
    </div>
    <script>
        function toggleNav() {
            var sidebar = document.getElementById("mySidebar");
            var main = document.getElementById("main");
            var openbtn = document.querySelector(".openbtn");

            if (sidebar.classList.contains('collapsed')) {
                sidebar.classList.remove('collapsed');
                sidebar.style.width = "250px";
                main.style.marginLeft = "250px";
                openbtn.innerHTML = "×"; // 'X' 아이콘으로 변경
            } else {
                sidebar.classList.add('collapsed');
                sidebar.style.width = "50px";
                main.style.marginLeft = "50px";
                openbtn.innerHTML = "☰"; // 햄버거 아이콘으로 변경
            }
        }

        function closeNav() {
            var sidebar = document.getElementById("mySidebar");
            var main = document.getElementById("main");
            var openbtn = document.querySelector(".openbtn");

            sidebar.classList.add('collapsed');
            sidebar.style.width = "50px";
            main.style.marginLeft = "50px";
            openbtn.innerHTML = "☰"; // 햄버거 아이콘으로 변경
        }

        function login() {
            const password = document.getElementById('password').value;
            // 관리자 비밀번호 확인 로직 (여기서는 간단하게 'admin'으로 설정)
            if (password === 'admin') {
                document.getElementById('login-form').classList.add('hidden');
                document.getElementById('admin-form').classList.remove('hidden');
            } else {
                alert('비밀번호가 틀렸습니다.');
            }
        }

        function saveChanges() {
            const formData = {
                uploadFolder: document.getElementById('uploadFolder').value,
                ora7User: document.getElementById('ora7User').value,
                ora7Password: document.getElementById('ora7Password').value,
                ora7Host: document.getElementById('ora7Host').value,
                ora7Port: document.getElementById('ora7Port').value,
                ora7ServiceName: document.getElementById('ora7ServiceName').value,
                neuronUser: document.getElementById('neuronUser').value,
                neuronPassword: document.getElementById('neuronPassword').value,
                neuronHost: document.getElementById('neuronHost').value,
                neuronPort: document.getElementById('neuronPort').value,
                neuronServiceName: document.getElementById('neuronServiceName').value,
            };

            fetch('/save_admin_settings', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData),
            })
            .then(response => response.json())
            .then(data => {
                alert('설정이 저장되었습니다.');
            })
            .catch(error => {
                console.error('Error:', error);
                alert('설정 저장에 실패했습니다.');
            });
        }
    </script>
</body>
</html>
